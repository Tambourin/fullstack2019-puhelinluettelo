(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),u=t(13),o=t.n(u),l=(t(21),t(14)),c=t(2),i=t(3),m=t.n(i),s="http://localhost:3001/api/persons",f=function(){return m.a.get(s).then(function(e){return e.data})},d=function(e){return m.a.post(s,e).then(function(e){return e.data})},b=function(e){return console.log("personID to be deleted:",e),m.a.delete(s+"/"+e)},p=function(e){return m.a.put(s+"/"+e._id,e)},h=function(e){var n=e.persons,t=e.deletePerson,a=n.map(function(e){return r.a.createElement("p",{key:e._id},e.name," ",e.number,r.a.createElement("span",null),r.a.createElement("button",{onClick:t(e)},"Poista"))});return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Numerot"),a)},E=function(e){return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4:",r.a.createElement("input",{onChange:e.changeHandler,value:e.filter}))},g=function(e){return r.a.createElement("form",null,r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{onChange:e.nameChangeHandler,value:e.newName})),r.a.createElement("div",null,"numero:"," ",r.a.createElement("input",{onChange:e.numberChangeHandler,value:e.newNumber})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:e.submitHandler},"lis\xe4\xe4")))},v=function(e){var n=e.message;if(null===n||""===n)return null;return r.a.createElement("div",{style:{color:"green",border:"solid",fontSize:16}},r.a.createElement("p",null,n))},j=function(e){var n=e.errorMessage;if(null===n||""===n)return null;return r.a.createElement("div",{style:{color:"red",border:"solid",fontSize:16}},r.a.createElement("p",null,n))},w=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],u=n[1],o=Object(a.useState)("uusi nimi"),i=Object(c.a)(o,2),m=i[0],s=i[1],w=Object(a.useState)(" "),O=Object(c.a)(w,2),C=O[0],k=O[1],H=Object(a.useState)(""),y=Object(c.a)(H,2),S=y[0],_=y[1],P=Object(a.useState)(""),N=Object(c.a)(P,2),D=N[0],I=N[1],T=Object(a.useState)(""),z=Object(c.a)(T,2),J=z[0],L=z[1];return Object(a.useEffect)(function(){f().then(function(e){u(e),console.log("Data haettu",e)})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(v,{message:D}),r.a.createElement(j,{errorMessage:J}),r.a.createElement(E,{changeHandler:function(e){_(e.target.value)},filer:S}),r.a.createElement(g,{nameChangeHandler:function(e){s(e.target.value)},numberChangeHandler:function(e){k(e.target.value)},newName:m,newNumber:C,submitHandler:function(e){if(e.preventDefault(),t.map(function(e){return e.name}).includes(m)){if(!window.confirm("".concat(m," on jo luettelossa, haluatko korvata numeron")))return;var n=t.find(function(e){return e.name===m}),a=Object(l.a)({},n,{number:C});p(a).then(function(e){u(t.map(function(n){return n._id!==e.data._id?n:e.data}))}).catch(function(e){L("P\xe4ivitt\xe4minen ei onnistunut"),setTimeout(function(){L(null)},5e3)})}else d({name:m,number:C}).then(function(e){u(t.concat(e)),I("Uusi yhteystieto luotu."),setTimeout(function(){L(null)},5e3),s(""),k("")}).catch(function(e){L(e.response.data.error)})}}),r.a.createElement(h,{deletePerson:function(e){return function(){window.confirm("Haluatko varmasti poistaa hekil\xf6n ".concat(e.name))&&(console.log("personID",e._id),b(e._id).then(function(n){u(t.filter(function(n){return n._id!==e._id})),console.log("response:",n)}).catch(function(e){L("Poistaminen ei onnistunut"),setTimeout(function(){L(null)},5e3)}))}},persons:t.filter(function(e){return e.name.toLowerCase().match(S.toLowerCase())})}))};o.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.bf33dc37.chunk.js.map
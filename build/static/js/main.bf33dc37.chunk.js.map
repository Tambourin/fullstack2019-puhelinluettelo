{"version":3,"sources":["services/persons.js","components/App.js","index.js"],"names":["baseUrl","services_persons","axios","get","then","response","data","newObject","post","id","console","log","delete","updatedPerson","put","_id","Names","_ref","persons","deletePerson","personNamesAndNumbers","map","person","react_default","a","createElement","key","name","number","onClick","Fragment","Filter","props","onChange","changeHandler","value","filter","PersonForm","nameChangeHandler","newName","numberChangeHandler","newNumber","type","submitHandler","Message","_ref2","message","style","color","border","fontSize","ErrorMessage","_ref3","errorMessage","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","setNewName","_useState5","_useState6","setNewNumber","_useState7","_useState8","filterName","setFilterName","_useState9","_useState10","setMessage","_useState11","_useState12","setErrorMessage","useEffect","personService","App_Message","App_ErrorMessage","App_Filter","event","target","filer","App_PersonForm","preventDefault","includes","window","confirm","concat","p","find","updatedP","objectSpread","catch","error","setTimeout","addedPerson","App_Names","toLowerCase","match","ReactDOM","render","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.bf33dc37.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\nconst baseUrl = 'http://localhost:3001/api/persons';\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl).then((response) => {\r\n    return response.data;\r\n  });\r\n}\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject).then((response) => {\r\n    return response.data;\r\n  });\r\n}\r\n\r\nconst deleteById = (id) => {\r\n  console.log('personID to be deleted:', id);\r\n   return axios.delete(baseUrl + \"/\" + id)\r\n}\r\n\r\nconst update = (updatedPerson) => {\r\n  return axios.put(baseUrl + \"/\" + updatedPerson._id, updatedPerson);\r\n\r\n}\r\n\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  deleteById: deleteById,\r\n  update: update\r\n}","import React, { useState, useEffect } from \"react\";\r\nimport personService from \"../services/persons\";\r\n\r\nconst Names = ({ persons, deletePerson }) => {\r\n\r\n  \r\n\r\n  const personNamesAndNumbers = persons.map(person => (\r\n    <p key={person._id}>\r\n      {person.name} {person.number}\r\n      <span></span>\r\n      <button onClick={deletePerson(person)}>Poista</button>\r\n    </p>\r\n  ));\r\n\r\n  return (\r\n    <>\r\n      <h2>Numerot</h2>\r\n      {personNamesAndNumbers}\r\n      \r\n    </>\r\n  );\r\n};\r\n\r\nconst Filter = props => {\r\n  return (\r\n    <div>\r\n      rajaa näytettäviä:\r\n      <input onChange={props.changeHandler} value={props.filter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PersonForm = props => {\r\n  return (\r\n    <form>\r\n      <div>\r\n        nimi: <input onChange={props.nameChangeHandler} value={props.newName} />\r\n      </div>\r\n      <div>\r\n        numero:{\" \"}\r\n        <input onChange={props.numberChangeHandler} value={props.newNumber} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\" onClick={props.submitHandler}>\r\n          lisää\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nconst Message = ({ message}) => {\r\n  if(message === null || message ===\"\") {\r\n    return null;\r\n  }  \r\n  const messageStyle = {\r\n    color: 'green',\r\n    border: 'solid',\r\n    fontSize: 16,\r\n  }\r\n  return (\r\n    <div style={messageStyle}>\r\n      <p>{message}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst ErrorMessage = ({ errorMessage }) => {\r\n  if(errorMessage === null || errorMessage ===\"\") {\r\n    return null;\r\n  }  \r\n  const messageStyle = {\r\n    color: 'red',\r\n    border: 'solid',\r\n    fontSize: 16,\r\n  }\r\n  return (\r\n    <div style={messageStyle}>\r\n      <p>{errorMessage}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"uusi nimi\");\r\n  const [newNumber, setNewNumber] = useState(\" \");\r\n  const [filterName, setFilterName] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n  const handleFilterChange = event => {\r\n    setFilterName(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    if (persons.map(person => person.name).includes(newName)) {\r\n      if(window.confirm(`${newName} on jo luettelossa, haluatko korvata numeron`)) {\r\n        const p = persons.find(p => p.name === newName);\r\n        const updatedP = { ...p, number: newNumber }\r\n        personService.update(updatedP).then(response => {\r\n          setPersons(persons.map(person => \r\n            person._id !== response.data._id ? person : response.data));\r\n        }).catch (error => {\r\n          setErrorMessage(\"Päivittäminen ei onnistunut\");\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000);\r\n        });\r\n      } else {\r\n        return;\r\n      }\r\n      \r\n    } else {\r\n      const newPerson = {\r\n        name: newName,\r\n        number: newNumber\r\n      };\r\n  \r\n      personService.create(newPerson).then(addedPerson => {\r\n        setPersons(persons.concat(addedPerson));\r\n        setMessage(\"Uusi yhteystieto luotu.\")    \r\n        setTimeout(() => {\r\n          setErrorMessage(null)\r\n        }, 5000)    \r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      }).catch(error => {\r\n        setErrorMessage(error.response.data.error);\r\n        //console.log(error.response.data.error);\r\n      });\r\n    }    \r\n  };\r\n\r\n  \r\n\r\n  const deletePerson = (person) => {\r\n    return () => {\r\n      if(window.confirm(`Haluatko varmasti poistaa hekilön ${person.name}`)) {\r\n        console.log('personID', person._id);\r\n        personService.deleteById(person._id).then((response) => {\r\n          setPersons(persons.filter(p => p._id !== person._id));\r\n          console.log('response:', response);\r\n        }).catch(error => {\r\n          setErrorMessage(\"Poistaminen ei onnistunut\");\r\n          setTimeout(() => {\r\n            setErrorMessage(null)\r\n          }, 5000);\r\n        });\r\n      }\r\n    }\r\n    \r\n  }\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(data => {\r\n      setPersons(data);\r\n      console.log('Data haettu', data);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Puhelinluettelo</h2>\r\n      <Message message={message} />\r\n      <ErrorMessage errorMessage={errorMessage} />\r\n      <Filter changeHandler={handleFilterChange} filer={filterName} />\r\n      <PersonForm\r\n        nameChangeHandler={handleNameChange}\r\n        numberChangeHandler={handleNumberChange}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        submitHandler={handleSubmit}\r\n      />\r\n      <Names\r\n        deletePerson={deletePerson}\r\n        persons={persons.filter(person =>\r\n          person.name.toLowerCase().match(filterName.toLowerCase())\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}